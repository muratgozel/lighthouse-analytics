define(["exports","event-emitter-object","visibility-state-listener","basekits"],(function(e,t,n,r){"use strict";function o(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var i=o(n),a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},c=function(e){return e&&e.Math==Math&&e},u=c("object"==typeof globalThis&&globalThis)||c("object"==typeof window&&window)||c("object"==typeof self&&self)||c("object"==typeof a&&a)||function(){return this}()||Function("return this")(),s={},l=function(e){try{return!!e()}catch(e){return!0}},f=!l((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),p={},d={}.propertyIsEnumerable,g=Object.getOwnPropertyDescriptor,y=g&&!d.call({1:2},1);p.f=y?function(e){var t=g(this,e);return!!t&&t.enumerable}:d;var m=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},v={}.toString,h=function(e){return v.call(e).slice(8,-1)},b=h,w="".split,j=l((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==b(e)?w.call(e,""):Object(e)}:Object,S=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e},O=j,_=S,E=function(e){return O(_(e))},P=function(e){return"object"==typeof e?null!==e:"function"==typeof e},k=P,I=function(e,t){if(!k(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!k(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!k(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!k(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")},A=S,T=function(e){return Object(A(e))},x=T,N={}.hasOwnProperty,M=function(e,t){return N.call(x(e),t)},F=P,G=u.document,L=F(G)&&F(G.createElement),R=function(e){return L?G.createElement(e):{}},C=!f&&!l((function(){return 7!=Object.defineProperty(R("div"),"a",{get:function(){return 7}}).a})),z=f,B=p,D=m,V=E,q=I,J=M,U=C,$=Object.getOwnPropertyDescriptor;s.f=z?$:function(e,t){if(e=V(e),t=q(t,!0),U)try{return $(e,t)}catch(e){}if(J(e,t))return D(!B.f.call(e,t),e[t])};var H={},K=P,W=function(e){if(!K(e))throw TypeError(String(e)+" is not an object");return e},X=f,Y=C,Z=W,Q=I,ee=Object.defineProperty;H.f=X?ee:function(e,t,n){if(Z(e),t=Q(t,!0),Z(n),Y)try{return ee(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e};var te=H,ne=m,re=f?function(e,t,n){return te.f(e,t,ne(1,n))}:function(e,t,n){return e[t]=n,e},oe={exports:{}},ie=u,ae=re,ce=function(e,t){try{ae(ie,e,t)}catch(n){ie[e]=t}return t},ue=ce,se="__core-js_shared__",le=u[se]||ue(se,{}),fe=le,pe=Function.toString;"function"!=typeof fe.inspectSource&&(fe.inspectSource=function(e){return pe.call(e)});var de=fe.inspectSource,ge=de,ye=u.WeakMap,me="function"==typeof ye&&/native code/.test(ge(ye)),ve={exports:{}},he=le;(ve.exports=function(e,t){return he[e]||(he[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.13.0",mode:"global",copyright:"Â© 2021 Denis Pushkarev (zloirock.ru)"});var be,we,je,Se=0,Oe=Math.random(),_e=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++Se+Oe).toString(36)},Ee=ve.exports,Pe=_e,ke=Ee("keys"),Ie={},Ae=me,Te=P,xe=re,Ne=M,Me=le,Fe=function(e){return ke[e]||(ke[e]=Pe(e))},Ge=Ie,Le="Object already initialized",Re=u.WeakMap;if(Ae||Me.state){var Ce=Me.state||(Me.state=new Re),ze=Ce.get,Be=Ce.has,De=Ce.set;be=function(e,t){if(Be.call(Ce,e))throw new TypeError(Le);return t.facade=e,De.call(Ce,e,t),t},we=function(e){return ze.call(Ce,e)||{}},je=function(e){return Be.call(Ce,e)}}else{var Ve=Fe("state");Ge[Ve]=!0,be=function(e,t){if(Ne(e,Ve))throw new TypeError(Le);return t.facade=e,xe(e,Ve,t),t},we=function(e){return Ne(e,Ve)?e[Ve]:{}},je=function(e){return Ne(e,Ve)}}var qe={set:be,get:we,has:je,enforce:function(e){return je(e)?we(e):be(e,{})},getterFor:function(e){return function(t){var n;if(!Te(t)||(n=we(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}},Je=u,Ue=re,$e=M,He=ce,Ke=de,We=qe.get,Xe=qe.enforce,Ye=String(String).split("String");(oe.exports=function(e,t,n,r){var o,i=!!r&&!!r.unsafe,a=!!r&&!!r.enumerable,c=!!r&&!!r.noTargetGet;"function"==typeof n&&("string"!=typeof t||$e(n,"name")||Ue(n,"name",t),(o=Xe(n)).source||(o.source=Ye.join("string"==typeof t?t:""))),e!==Je?(i?!c&&e[t]&&(a=!0):delete e[t],a?e[t]=n:Ue(e,t,n)):a?e[t]=n:He(t,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&We(this).source||Ke(this)}));var Ze=u,Qe=u,et=function(e){return"function"==typeof e?e:void 0},tt=function(e,t){return arguments.length<2?et(Ze[e])||et(Qe[e]):Ze[e]&&Ze[e][t]||Qe[e]&&Qe[e][t]},nt={},rt=Math.ceil,ot=Math.floor,it=function(e){return isNaN(e=+e)?0:(e>0?ot:rt)(e)},at=it,ct=Math.min,ut=function(e){return e>0?ct(at(e),9007199254740991):0},st=it,lt=Math.max,ft=Math.min,pt=E,dt=ut,gt=function(e,t){var n=st(e);return n<0?lt(n+t,0):ft(n,t)},yt=function(e){return function(t,n,r){var o,i=pt(t),a=dt(i.length),c=gt(r,a);if(e&&n!=n){for(;a>c;)if((o=i[c++])!=o)return!0}else for(;a>c;c++)if((e||c in i)&&i[c]===n)return e||c||0;return!e&&-1}},mt={includes:yt(!0),indexOf:yt(!1)},vt=M,ht=E,bt=mt.indexOf,wt=Ie,jt=function(e,t){var n,r=ht(e),o=0,i=[];for(n in r)!vt(wt,n)&&vt(r,n)&&i.push(n);for(;t.length>o;)vt(r,n=t[o++])&&(~bt(i,n)||i.push(n));return i},St=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Ot=jt,_t=St.concat("length","prototype");nt.f=Object.getOwnPropertyNames||function(e){return Ot(e,_t)};var Et={};Et.f=Object.getOwnPropertySymbols;var Pt=nt,kt=Et,It=W,At=tt("Reflect","ownKeys")||function(e){var t=Pt.f(It(e)),n=kt.f;return n?t.concat(n(e)):t},Tt=M,xt=At,Nt=s,Mt=H,Ft=l,Gt=/#|\.prototype\./,Lt=function(e,t){var n=Ct[Rt(e)];return n==Bt||n!=zt&&("function"==typeof t?Ft(t):!!t)},Rt=Lt.normalize=function(e){return String(e).replace(Gt,".").toLowerCase()},Ct=Lt.data={},zt=Lt.NATIVE="N",Bt=Lt.POLYFILL="P",Dt=Lt,Vt=u,qt=s.f,Jt=re,Ut=oe.exports,$t=ce,Ht=function(e,t){for(var n=xt(t),r=Mt.f,o=Nt.f,i=0;i<n.length;i++){var a=n[i];Tt(e,a)||r(e,a,o(t,a))}},Kt=Dt,Wt=function(e,t){var n,r,o,i,a,c=e.target,u=e.global,s=e.stat;if(n=u?Vt:s?Vt[c]||$t(c,{}):(Vt[c]||{}).prototype)for(r in t){if(i=t[r],o=e.noTargetGet?(a=qt(n,r))&&a.value:n[r],!Kt(u?r:c+(s?".":"#")+r,e.forced)&&void 0!==o){if(typeof i==typeof o)continue;Ht(i,o)}(e.sham||o&&o.sham)&&Jt(i,"sham",!0),Ut(n,r,i,e)}},Xt=jt,Yt=St,Zt=Object.keys||function(e){return Xt(e,Yt)},Qt=f,en=l,tn=Zt,nn=Et,rn=p,on=T,an=j,cn=Object.assign,un=Object.defineProperty,sn=!cn||en((function(){if(Qt&&1!==cn({b:1},cn(un({},"a",{enumerable:!0,get:function(){un(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!=cn({},e)[n]||tn(cn({},t)).join("")!=r}))?function(e,t){for(var n=on(e),r=arguments.length,o=1,i=nn.f,a=rn.f;r>o;)for(var c,u=an(arguments[o++]),s=i?tn(u).concat(i(u)):tn(u),l=s.length,f=0;l>f;)c=s[f++],Qt&&!a.call(u,c)||(n[c]=u[c]);return n}:cn;Wt({target:"Object",stat:!0,forced:Object.assign!==sn},{assign:sn});var ln,fn,pn=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e},dn=h,gn=Array.isArray||function(e){return"Array"==dn(e)},yn=tt("navigator","userAgent")||"",mn=u.process,vn=mn&&mn.versions,hn=vn&&vn.v8;hn?fn=(ln=hn.split("."))[0]<4?1:ln[0]+ln[1]:yn&&(!(ln=yn.match(/Edge\/(\d+)/))||ln[1]>=74)&&(ln=yn.match(/Chrome\/(\d+)/))&&(fn=ln[1]);var bn=fn&&+fn,wn=bn,jn=l,Sn=!!Object.getOwnPropertySymbols&&!jn((function(){return!String(Symbol())||!Symbol.sham&&wn&&wn<41})),On=Sn&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,_n=u,En=ve.exports,Pn=M,kn=_e,In=Sn,An=On,Tn=En("wks"),xn=_n.Symbol,Nn=An?xn:xn&&xn.withoutSetter||kn,Mn=function(e){return Pn(Tn,e)&&(In||"string"==typeof Tn[e])||(In&&Pn(xn,e)?Tn[e]=xn[e]:Tn[e]=Nn("Symbol."+e)),Tn[e]},Fn=P,Gn=gn,Ln=Mn("species"),Rn=function(e,t,n){if(pn(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}},Cn=j,zn=T,Bn=ut,Dn=function(e,t){var n;return Gn(e)&&("function"!=typeof(n=e.constructor)||n!==Array&&!Gn(n.prototype)?Fn(n)&&null===(n=n[Ln])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===t?0:t)},Vn=[].push,qn=function(e){var t=1==e,n=2==e,r=3==e,o=4==e,i=6==e,a=7==e,c=5==e||i;return function(u,s,l,f){for(var p,d,g=zn(u),y=Cn(g),m=Rn(s,l,3),v=Bn(y.length),h=0,b=f||Dn,w=t?b(u,v):n||a?b(u,0):void 0;v>h;h++)if((c||h in y)&&(d=m(p=y[h],h,g),e))if(t)w[h]=d;else if(d)switch(e){case 3:return!0;case 5:return p;case 6:return h;case 2:Vn.call(w,p)}else switch(e){case 4:return!1;case 7:Vn.call(w,p)}return i?-1:r||o?o:w}},Jn={forEach:qn(0),map:qn(1),filter:qn(2),some:qn(3),every:qn(4),find:qn(5),findIndex:qn(6),filterOut:qn(7)},Un=l,$n=bn,Hn=Mn("species"),Kn=Jn.map;Wt({target:"Array",proto:!0,forced:!function(e){return $n>=51||!Un((function(){var t=[];return(t.constructor={})[Hn]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}("map")},{map:function(e){return Kn(this,e,arguments.length>1?arguments[1]:void 0)}});var Wn=T,Xn=Zt;Wt({target:"Object",stat:!0,forced:l((function(){Xn(1)}))},{keys:function(e){return Xn(Wn(e))}});var Yn=Object.assign?Object.assign:function(e,t,n,r){for(var o=1;o<arguments.length;o++)rr(Object(arguments[o]),(function(t,n){e[n]=t}));return e},Zn=function(){if(Object.create)return function(e,t,n,r){var o=nr(arguments,1);return Yn.apply(this,[Object.create(e)].concat(o))};{function e(){}return function(t,n,r,o){var i=nr(arguments,1);return e.prototype=t,Yn.apply(this,[new e].concat(i))}}}(),Qn=String.prototype.trim?function(e){return String.prototype.trim.call(e)}:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},er="undefined"!=typeof window?window:a,tr={assign:Yn,create:Zn,trim:Qn,bind:function(e,t){return function(){return t.apply(e,Array.prototype.slice.call(arguments,0))}},slice:nr,each:rr,map:function(e,t){var n=ir(e)?[]:{};return or(e,(function(e,r){return n[r]=t(e,r),!1})),n},pluck:or,isList:ir,isFunction:function(e){return e&&"[object Function]"==={}.toString.call(e)},isObject:function(e){return e&&"[object Object]"==={}.toString.call(e)},Global:er};function nr(e,t){return Array.prototype.slice.call(e,t||0)}function rr(e,t){or(e,(function(e,n){return t(e,n),!1}))}function or(e,t){if(ir(e)){for(var n=0;n<e.length;n++)if(t(e[n],n))return e[n]}else for(var r in e)if(e.hasOwnProperty(r)&&t(e[r],r))return e[r]}function ir(e){return null!=e&&"function"!=typeof e&&"number"==typeof e.length}var ar=tr.slice,cr=tr.pluck,ur=tr.each,sr=tr.bind,lr=tr.create,fr=tr.isList,pr=tr.isFunction,dr=tr.isObject,gr={createStore:mr},yr={version:"2.0.12",enabled:!1,get:function(e,t){var n=this.storage.read(this._namespacePrefix+e);return this._deserialize(n,t)},set:function(e,t){return void 0===t?this.remove(e):(this.storage.write(this._namespacePrefix+e,this._serialize(t)),t)},remove:function(e){this.storage.remove(this._namespacePrefix+e)},each:function(e){var t=this;this.storage.each((function(n,r){e.call(t,t._deserialize(n),(r||"").replace(t._namespaceRegexp,""))}))},clearAll:function(){this.storage.clearAll()},hasNamespace:function(e){return this._namespacePrefix=="__storejs_"+e+"_"},createStore:function(){return mr.apply(this,arguments)},addPlugin:function(e){this._addPlugin(e)},namespace:function(e){return mr(this.storage,this.plugins,e)}};function mr(e,t,n){n||(n=""),e&&!fr(e)&&(e=[e]),t&&!fr(t)&&(t=[t]);var r=n?"__storejs_"+n+"_":"",o=n?new RegExp("^"+r):null;if(!/^[a-zA-Z0-9_\-]*$/.test(n))throw new Error("store.js namespaces can only have alphanumerics + underscores and dashes");var i=lr({_namespacePrefix:r,_namespaceRegexp:o,_testStorage:function(e){try{var t="__storejs__test__";e.write(t,t);var n=e.read(t)===t;return e.remove(t),n}catch(e){return!1}},_assignPluginFnProp:function(e,t){var n=this[t];this[t]=function(){var t=ar(arguments,0),r=this;function o(){if(n)return ur(arguments,(function(e,n){t[n]=e})),n.apply(r,t)}var i=[o].concat(t);return e.apply(r,i)}},_serialize:function(e){return JSON.stringify(e)},_deserialize:function(e,t){if(!e)return t;var n="";try{n=JSON.parse(e)}catch(t){n=e}return void 0!==n?n:t},_addStorage:function(e){this.enabled||this._testStorage(e)&&(this.storage=e,this.enabled=!0)},_addPlugin:function(e){var t=this;if(fr(e))ur(e,(function(e){t._addPlugin(e)}));else if(!cr(this.plugins,(function(t){return e===t}))){if(this.plugins.push(e),!pr(e))throw new Error("Plugins must be function values that return objects");var n=e.call(this);if(!dr(n))throw new Error("Plugins must return an object of function properties");ur(n,(function(n,r){if(!pr(n))throw new Error("Bad plugin property: "+r+" from plugin "+e.name+". Plugins should only return functions.");t._assignPluginFnProp(n,r)}))}},addStorage:function(e){!function(){var e="undefined"==typeof console?null:console;if(e){(e.warn?e.warn:e.log).apply(e,arguments)}}("store.addStorage(storage) is deprecated. Use createStore([storages])"),this._addStorage(e)}},yr,{plugins:[]});return i.raw={},ur(i,(function(e,t){pr(e)&&(i.raw[t]=sr(i,e))})),ur(e,(function(e){i._addStorage(e)})),ur(t,(function(e){i._addPlugin(e)})),i}var vr=tr.Global,hr={name:"localStorage",read:wr,write:function(e,t){return br().setItem(e,t)},each:function(e){for(var t=br().length-1;t>=0;t--){var n=br().key(t);e(wr(n),n)}},remove:function(e){return br().removeItem(e)},clearAll:function(){return br().clear()}};function br(){return vr.localStorage}function wr(e){return br().getItem(e)}var jr=tr.Global,Sr={name:"sessionStorage",read:_r,write:function(e,t){return Or().setItem(e,t)},each:function(e){for(var t=Or().length-1;t>=0;t--){var n=Or().key(t);e(_r(n),n)}},remove:function(e){return Or().removeItem(e)},clearAll:function(){return Or().clear()}};function Or(){return jr.sessionStorage}function _r(e){return Or().getItem(e)}var Er=tr.trim,Pr={name:"cookieStorage",read:function(e){if(!e||!Tr(e))return null;var t="(?:^|.*;\\s*)"+escape(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*((?:[^;](?!;))*[^;]?).*";return unescape(kr.cookie.replace(new RegExp(t),"$1"))},write:function(e,t){if(!e)return;kr.cookie=escape(e)+"="+escape(t)+"; expires=Tue, 19 Jan 2038 03:14:07 GMT; path=/"},each:Ir,remove:Ar,clearAll:function(){Ir((function(e,t){Ar(t)}))}},kr=tr.Global.document;function Ir(e){for(var t=kr.cookie.split(/; ?/g),n=t.length-1;n>=0;n--)if(Er(t[n])){var r=t[n].split("="),o=unescape(r[0]);e(unescape(r[1]),o)}}function Ar(e){e&&Tr(e)&&(kr.cookie=escape(e)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/")}function Tr(e){return new RegExp("(?:^|;\\s*)"+escape(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(kr.cookie)}var xr={name:"memoryStorage",read:function(e){return Nr[e]},write:function(e,t){Nr[e]=t},each:function(e){for(var t in Nr)Nr.hasOwnProperty(t)&&e(Nr[t],t)},remove:function(e){delete Nr[e]},clearAll:function(e){Nr={}}},Nr={};var Mr,Fr=gr.createStore([hr,Sr,Pr,xr],[]),Gr=function(e,t){var n="000000000"+e;return n.substr(n.length-t)},Lr=Gr,Rr="object"==typeof window?window:self,Cr=Object.keys(Rr).length,zr=Lr(((navigator.mimeTypes?navigator.mimeTypes.length:0)+navigator.userAgent.length).toString(36)+Cr.toString(36),4),Br="undefined"!=typeof window&&(window.crypto||window.msCrypto)||"undefined"!=typeof self&&self.crypto;if(Br){var Dr=Math.pow(2,32)-1;Mr=function(){return Math.abs(Br.getRandomValues(new Uint32Array(1))[0]/Dr)}}else Mr=Math.random;var Vr=function(){return zr},qr=Gr,Jr=Mr,Ur=0,$r=Math.pow(36,4);function Hr(){return qr((Jr()*$r<<0).toString(36),4)}function Kr(){return Ur=Ur<$r?Ur:0,++Ur-1}function Wr(){return"c"+(new Date).getTime().toString(36)+qr(Kr().toString(36),4)+Vr()+(Hr()+Hr())}Wr.slug=function(){var e=(new Date).getTime().toString(36),t=Kr().toString(36).slice(-4),n=Vr().slice(0,1)+Vr().slice(-1),r=Hr().slice(-2);return e.slice(-2)+t+n+r},Wr.isCuid=function(e){return"string"==typeof e&&!!e.startsWith("c")},Wr.isSlug=function(e){if("string"!=typeof e)return!1;var t=e.length;return t>=7&&t<=10},Wr.fingerprint=Vr;var Xr=Wr;var Yr=f,Zr=H.f,Qr=Function.prototype,eo=Qr.toString,to=/^\s*function ([^ (]*)/,no="name";Yr&&!(no in Qr)&&Zr(Qr,no,{configurable:!0,get:function(){try{return eo.call(this).match(to)[1]}catch(e){return""}}});var ro=function(){var e=0,t=["bodyEnd","bodyStart","headEnd"];function n(e){return e.split("/").reverse()[0].split("?")[0]}function r(t){return t.replace(/[^a-zA-Z0-9]/g,"-").split("-").reverse().join("-")+"-"+e}return{create:function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i={timeout:3e3};function a(o){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,c={id:null,type:"text/javascript",async:!0,attrs:{},location:t[0],global:null};return"[object Object]"===Object.prototype.toString.call(a)&&Object.keys(c).map((function(e){a.hasOwnProperty(e)&&(c[e]=a[e])})),c.id||(c.id=r(n(o)),e+=1),new Promise((function(e,t){if(document.getElementById(c.id))return e(c.id);var n=setTimeout((function(){return t(new Error("Inject timeout."))}),i.timeout),r=document.createElement("script");function a(){if(clearTimeout(n),!c.global)return e(c.id);var r=0,o=setInterval((function(){return r+=1,window[c.global]?(clearInterval(o),e(c.id)):r>=20?t(new Error("Max call size exceeded. Given up looking for global property.")):void 0}),100)}r.id=c.id,r.type=c.type,r.async=c.async,c.attrs&&Object.keys(c.attrs).map((function(e){r.setAttribute(e,c.attrs[e])})),r.addEventListener?r.addEventListener("load",a,!1):r.readyState?r.onreadystatechange=a:r.onload&&(r.onload=a),r.onerror&&(r.onerror=function(e){return clearTimeout(n),t(e)}),r.src=o,l(r,c.location)}))}function c(o){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,c={id:null,type:"text/css",media:"all",attrs:{},location:t[0]};return"[object Object]"===Object.prototype.toString.call(a)&&Object.keys(c).map((function(e){a.hasOwnProperty(e)&&(c[e]=a[e])})),c.id||(c.id=r(n(o)),e+=1),new Promise((function(e,t){if(document.getElementById(c.id))return e(c.id);var n=setTimeout((function(){return t(new Error("Inject timeout."))}),i.timeout),r=document.createElement("link");function a(){return r.media=c.media,clearTimeout(n),e(c.id)}r.id=c.id,r.rel="stylesheet",r.href=o,r.media="only x",c.attrs&&Object.keys(c.attrs).map((function(e){r.setAttribute(e,c.attrs[e])})),r.addEventListener?r.addEventListener("load",a,!1):r.readyState?r.onreadystatechange=a:r.onload&&(r.onload=a),r.onerror&&(r.onerror=function(e){return clearTimeout(n),t(e)}),l(r,c.location)}))}function u(n,r){var o={id:null,type:"application/ld+json",attrs:{},location:t[0]};if("[object Object]"===Object.prototype.toString.call(r)&&Object.keys(o).map((function(e){r.hasOwnProperty(e)&&(o[e]=r[e])})),o.id||(o.id=e,e+=1),document.getElementById(o.id))return o.id;var i=document.createElement("script");return i.id=o.id,i.type=o.type,i.text="string"==typeof n?n:JSON.stringify(n),o.attrs&&Object.keys(o.attrs).map((function(e){i.setAttribute(e,o.attrs[e])})),l(i,o.location),o.id}function s(e){var t=document.getElementById(e);t&&t.parentNode.removeChild(t)}function l(e,t){var n=document.getElementsByTagName("head")[0],r=document.getElementsByTagName("body")[0];"headEnd"==t?n.insertBefore(e,null):"bodyEnd"==t?r.insertBefore(e,null):"bodyStart"==t&&r.insertBefore(e,r.firstChild)}return"[object Object]"===Object.prototype.toString.call(o)&&Object.keys(i).map((function(e){o.hasOwnProperty(e)&&(i[e]=o[e])})),{injectjs:a,injectcss:c,injectjsonld:u,remove:s}}}}();e.GoogleAnalytics=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(r.typekit.isEmpty(e.property))throw new Error("Specify Google Analytics property.");var t=ro.create(),n={name:"Google Analytics",property:e.property,userID:r.objectkit.getProp(e,"userID",null),localEventNames:{SCREEN:"screen_view",TIMING:"timing_complete",EXCEPTION:"exception",SHARE:"share",SEARCH:"search",SIGNIN:"login",SIGNUP:"sign_up"}};function o(){window.dataLayer=window.dataLayer||[],window.gtag=function(){dataLayer.push(arguments)},window.gtag("js",new Date),window.gtag("config",n.property,{send_page_view:!1,user_id:n.userID});var e="https://www.googletagmanager.com/gtag/js?id="+n.property;return t.injectjs(e,{id:"lighthouse-service-google-analytics",location:"headEnd"})}function i(e,t){var o=r.objectkit.getProp(n.localEventNames,e.name,e.name),i={};if("SCREEN"==e.name){var a={title:r.objectkit.getProp(e.params,"title",document.title),page_location:r.objectkit.getProp(e.params,"url",location.href),page_path:r.objectkit.getProp(e.params,"path",location.pathname)};window.gtag("config",n.property,a),i.screen_name=r.objectkit.getProp(e.params,"title",document.title),t.app.name&&(i.app_name=t.app.name),t.app.version&&(i.app_version=t.app.version)}else"EXCEPTION"==e.name?i.description=e.params.error.message:"SHARE"==e.name?(i.event_category=e.params.channel,i.event_label=r.objectkit.getProp(e.params,"url",location.href)):"SEARCH"==e.name?(i.event_category="engagement",i.event_label=e.params.query):"SIGNIN"==e.name||"SIGNUP"==e.name?(i.event_category="engagement",i.event_label=e.params.method):(i.event_category="engagement",i.event_label=e.params.value||"");window.gtag("event",o,i)}function a(){window["ga-disable-"+n.property]=!0}function c(){window["ga-disable-"+n.property]=!1}return{name:n.name,init:o,send:i,disable:a,enable:c}},e.LighthouseAnalytics=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};function n(){var e={},t=0,n=0;return{enqueue:function(t){e[n]=t,n++},dequeue:function(){var n=e[t];return delete e[t],t++,n},peek:function(){return e[t]},length:function(){return n-t}}}var o={trackVisibility:!0,collectReferrer:!0},a=Object.assign({},o,e),c=t.create();a.window||"undefined"==typeof window||window;var u=a.document||("undefined"==typeof document?void 0:document),s={storageKeys:{did:"LA_DID"}},l=[],f=n(),p={did:null,new:!1,user:{id:null},app:{name:null,version:null,id:null}};function d(){var e=Fr.get(s.storageKeys.did);r.validationkit.isEmpty(e)&&(p.new=!0,e=Xr(),Fr.set(s.storageKeys.did,e)),p.did=e,a.collectReferrer&&(p.referrer=u.referrer)}function g(e){e.hasOwnProperty("id")&&(p.user.id=e.id)}function y(e){Object.keys(p.app).map((function(t){e.hasOwnProperty(t)&&(p.app[t]=e[t])}))}function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Date.now(),o={name:e,timestamp:n,params:t};0===f.length()&&(o.firstVisitMaybe=p.new,a.collectReferrer&&(o.referrer=r.validationkit.isNotEmpty(p.referrer)?p.referrer:null)),f.enqueue(o),l.length>0&&l.map((function(e){return e.send(f.dequeue(),p)})),c.emit("activity",[o,p])}function v(e){return l.push(e)&&e.init()}return d(),a.trackVisibility&&(p.currentVisibility="visible",i.default.on("update",(function(e){p.currentVisibility=e,c.emit("visibility",[e]),m("VISIBILITY",{value:e})})),i.default.start()),{on:c.on,newActivity:m,setUser:g,setApp:y,newService:v}},Object.defineProperty(e,"__esModule",{value:!0})}));
