var LighthouseAnalytics=function(e,t,n,r){"use strict";function i(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var o=i(n),a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},u=Object.assign?Object.assign:function(e,t,n,r){for(var i=1;i<arguments.length;i++)d(Object(arguments[i]),(function(t,n){e[n]=t}));return e},c=function(){if(Object.create)return function(e,t,n,r){var i=p(arguments,1);return u.apply(this,[Object.create(e)].concat(i))};{function e(){}return function(t,n,r,i){var o=p(arguments,1);return e.prototype=t,u.apply(this,[new e].concat(o))}}}(),s=String.prototype.trim?function(e){return String.prototype.trim.call(e)}:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},l="undefined"!=typeof window?window:a,f={assign:u,create:c,trim:s,bind:function(e,t){return function(){return t.apply(e,Array.prototype.slice.call(arguments,0))}},slice:p,each:d,map:function(e,t){var n=m(e)?[]:{};return g(e,(function(e,r){return n[r]=t(e,r),!1})),n},pluck:g,isList:m,isFunction:function(e){return e&&"[object Function]"==={}.toString.call(e)},isObject:function(e){return e&&"[object Object]"==={}.toString.call(e)},Global:l};function p(e,t){return Array.prototype.slice.call(e,t||0)}function d(e,t){g(e,(function(e,n){return t(e,n),!1}))}function g(e,t){if(m(e)){for(var n=0;n<e.length;n++)if(t(e[n],n))return e[n]}else for(var r in e)if(e.hasOwnProperty(r)&&t(e[r],r))return e[r]}function m(e){return null!=e&&"function"!=typeof e&&"number"==typeof e.length}var y=f.slice,v=f.pluck,h=f.each,w=f.bind,b=f.create,j=f.isList,_=f.isFunction,E=f.isObject,S={createStore:O},I={version:"2.0.12",enabled:!1,get:function(e,t){var n=this.storage.read(this._namespacePrefix+e);return this._deserialize(n,t)},set:function(e,t){return void 0===t?this.remove(e):(this.storage.write(this._namespacePrefix+e,this._serialize(t)),t)},remove:function(e){this.storage.remove(this._namespacePrefix+e)},each:function(e){var t=this;this.storage.each((function(n,r){e.call(t,t._deserialize(n),(r||"").replace(t._namespaceRegexp,""))}))},clearAll:function(){this.storage.clearAll()},hasNamespace:function(e){return this._namespacePrefix=="__storejs_"+e+"_"},createStore:function(){return O.apply(this,arguments)},addPlugin:function(e){this._addPlugin(e)},namespace:function(e){return O(this.storage,this.plugins,e)}};function O(e,t,n){n||(n=""),e&&!j(e)&&(e=[e]),t&&!j(t)&&(t=[t]);var r=n?"__storejs_"+n+"_":"",i=n?new RegExp("^"+r):null;if(!/^[a-zA-Z0-9_\-]*$/.test(n))throw new Error("store.js namespaces can only have alphanumerics + underscores and dashes");var o=b({_namespacePrefix:r,_namespaceRegexp:i,_testStorage:function(e){try{var t="__storejs__test__";e.write(t,t);var n=e.read(t)===t;return e.remove(t),n}catch(e){return!1}},_assignPluginFnProp:function(e,t){var n=this[t];this[t]=function(){var t=y(arguments,0),r=this;function i(){if(n)return h(arguments,(function(e,n){t[n]=e})),n.apply(r,t)}var o=[i].concat(t);return e.apply(r,o)}},_serialize:function(e){return JSON.stringify(e)},_deserialize:function(e,t){if(!e)return t;var n="";try{n=JSON.parse(e)}catch(t){n=e}return void 0!==n?n:t},_addStorage:function(e){this.enabled||this._testStorage(e)&&(this.storage=e,this.enabled=!0)},_addPlugin:function(e){var t=this;if(j(e))h(e,(function(e){t._addPlugin(e)}));else if(!v(this.plugins,(function(t){return e===t}))){if(this.plugins.push(e),!_(e))throw new Error("Plugins must be function values that return objects");var n=e.call(this);if(!E(n))throw new Error("Plugins must return an object of function properties");h(n,(function(n,r){if(!_(n))throw new Error("Bad plugin property: "+r+" from plugin "+e.name+". Plugins should only return functions.");t._assignPluginFnProp(n,r)}))}},addStorage:function(e){!function(){var e="undefined"==typeof console?null:console;if(e){(e.warn?e.warn:e.log).apply(e,arguments)}}("store.addStorage(storage) is deprecated. Use createStore([storages])"),this._addStorage(e)}},I,{plugins:[]});return o.raw={},h(o,(function(e,t){_(e)&&(o.raw[t]=w(o,e))})),h(e,(function(e){o._addStorage(e)})),h(t,(function(e){o._addPlugin(e)})),o}var P=f.Global,A={name:"localStorage",read:T,write:function(e,t){return k().setItem(e,t)},each:function(e){for(var t=k().length-1;t>=0;t--){var n=k().key(t);e(T(n),n)}},remove:function(e){return k().removeItem(e)},clearAll:function(){return k().clear()}};function k(){return P.localStorage}function T(e){return k().getItem(e)}var N=f.Global,x={name:"sessionStorage",read:R,write:function(e,t){return G().setItem(e,t)},each:function(e){for(var t=G().length-1;t>=0;t--){var n=G().key(t);e(R(n),n)}},remove:function(e){return G().removeItem(e)},clearAll:function(){return G().clear()}};function G(){return N.sessionStorage}function R(e){return G().getItem(e)}var L=f.trim,D={name:"cookieStorage",read:function(e){if(!e||!C(e))return null;var t="(?:^|.*;\\s*)"+escape(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*((?:[^;](?!;))*[^;]?).*";return unescape(q.cookie.replace(new RegExp(t),"$1"))},write:function(e,t){if(!e)return;q.cookie=escape(e)+"="+escape(t)+"; expires=Tue, 19 Jan 2038 03:14:07 GMT; path=/"},each:B,remove:F,clearAll:function(){B((function(e,t){F(t)}))}},q=f.Global.document;function B(e){for(var t=q.cookie.split(/; ?/g),n=t.length-1;n>=0;n--)if(L(t[n])){var r=t[n].split("="),i=unescape(r[0]);e(unescape(r[1]),i)}}function F(e){e&&C(e)&&(q.cookie=escape(e)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/")}function C(e){return new RegExp("(?:^|;\\s*)"+escape(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(q.cookie)}var M={name:"memoryStorage",read:function(e){return z[e]},write:function(e,t){z[e]=t},each:function(e){for(var t in z)z.hasOwnProperty(t)&&e(z[t],t)},remove:function(e){delete z[e]},clearAll:function(e){z={}}},z={};var V,J=S.createStore([A,x,D,M],[]),U=function(e,t){var n="000000000"+e;return n.substr(n.length-t)},$=U,H="object"==typeof window?window:self,K=Object.keys(H).length,Y=$(((navigator.mimeTypes?navigator.mimeTypes.length:0)+navigator.userAgent.length).toString(36)+K.toString(36),4),X="undefined"!=typeof window&&(window.crypto||window.msCrypto)||"undefined"!=typeof self&&self.crypto;if(X){var Z=Math.pow(2,32)-1;V=function(){return Math.abs(X.getRandomValues(new Uint32Array(1))[0]/Z)}}else V=Math.random;var W=function(){return Y},Q=U,ee=V,te=0,ne=Math.pow(36,4);function re(){return Q((ee()*ne<<0).toString(36),4)}function ie(){return te=te<ne?te:0,++te-1}function oe(){return"c"+(new Date).getTime().toString(36)+Q(ie().toString(36),4)+W()+(re()+re())}oe.slug=function(){var e=(new Date).getTime().toString(36),t=ie().toString(36).slice(-4),n=W().slice(0,1)+W().slice(-1),r=re().slice(-2);return e.slice(-2)+t+n+r},oe.isCuid=function(e){return"string"==typeof e&&!!e.startsWith("c")},oe.isSlug=function(e){if("string"!=typeof e)return!1;var t=e.length;return t>=7&&t<=10},oe.fingerprint=W;var ae=oe;var ue=function(){var e=0,t=["bodyEnd","bodyStart","headEnd"];function n(e){return e.split("/").reverse()[0].split("?")[0]}function r(t){return t.replace(/[^a-zA-Z0-9]/g,"-").split("-").reverse().join("-")+"-"+e}return{create:function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,o={timeout:3e3};function a(i){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,u={id:null,type:"text/javascript",async:!0,attrs:{},location:t[0],global:null};return"[object Object]"===Object.prototype.toString.call(a)&&Object.keys(u).map((function(e){a.hasOwnProperty(e)&&(u[e]=a[e])})),u.id||(u.id=r(n(i)),e+=1),new Promise((function(e,t){if(document.getElementById(u.id))return e(u.id);var n=setTimeout((function(){return t(new Error("Inject timeout."))}),o.timeout),r=document.createElement("script");function a(){if(clearTimeout(n),!u.global)return e(u.id);var r=0,i=setInterval((function(){return r+=1,window[u.global]?(clearInterval(i),e(u.id)):r>=20?t(new Error("Max call size exceeded. Given up looking for global property.")):void 0}),100)}r.id=u.id,r.type=u.type,r.async=u.async,u.attrs&&Object.keys(u.attrs).map((function(e){r.setAttribute(e,u.attrs[e])})),r.addEventListener?r.addEventListener("load",a,!1):r.readyState?r.onreadystatechange=a:r.onload&&(r.onload=a),r.onerror&&(r.onerror=function(e){return clearTimeout(n),t(e)}),r.src=i,l(r,u.location)}))}function u(i){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,u={id:null,type:"text/css",media:"all",attrs:{},location:t[0]};return"[object Object]"===Object.prototype.toString.call(a)&&Object.keys(u).map((function(e){a.hasOwnProperty(e)&&(u[e]=a[e])})),u.id||(u.id=r(n(i)),e+=1),new Promise((function(e,t){if(document.getElementById(u.id))return e(u.id);var n=setTimeout((function(){return t(new Error("Inject timeout."))}),o.timeout),r=document.createElement("link");function a(){return r.media=u.media,clearTimeout(n),e(u.id)}r.id=u.id,r.rel="stylesheet",r.href=i,r.media="only x",u.attrs&&Object.keys(u.attrs).map((function(e){r.setAttribute(e,u.attrs[e])})),r.addEventListener?r.addEventListener("load",a,!1):r.readyState?r.onreadystatechange=a:r.onload&&(r.onload=a),r.onerror&&(r.onerror=function(e){return clearTimeout(n),t(e)}),l(r,u.location)}))}function c(n,r){var i={id:null,type:"application/ld+json",attrs:{},location:t[0]};if("[object Object]"===Object.prototype.toString.call(r)&&Object.keys(i).map((function(e){r.hasOwnProperty(e)&&(i[e]=r[e])})),i.id||(i.id=e,e+=1),document.getElementById(i.id))return i.id;var o=document.createElement("script");return o.id=i.id,o.type=i.type,o.text="string"==typeof n?n:JSON.stringify(n),i.attrs&&Object.keys(i.attrs).map((function(e){o.setAttribute(e,i.attrs[e])})),l(o,i.location),i.id}function s(e){var t=document.getElementById(e);t&&t.parentNode.removeChild(t)}function l(e,t){var n=document.getElementsByTagName("head")[0],r=document.getElementsByTagName("body")[0];"headEnd"==t?n.insertBefore(e,null):"bodyEnd"==t?r.insertBefore(e,null):"bodyStart"==t&&r.insertBefore(e,r.firstChild)}return"[object Object]"===Object.prototype.toString.call(i)&&Object.keys(o).map((function(e){i.hasOwnProperty(e)&&(o[e]=i[e])})),{injectjs:a,injectcss:u,injectjsonld:c,remove:s}}}}();return e.GoogleAnalytics=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(r.typekit.isEmpty(e.property))throw new Error("Specify Google Analytics property.");var t=ue.create(),n={status:"NOT_INITIATED",queue:[]},i={name:"Google Analytics",property:e.property,userID:r.objectkit.getProp(e,"userID",null),localEventNames:{SCREEN:"screen_view",TIMING:"timing_complete",EXCEPTION:"exception",SHARE:"share",SEARCH:"search",SIGNIN:"login",SIGNUP:"sign_up"}};function o(){n.status="INITIATING",window.dataLayer=window.dataLayer||[],window.gtag=function(){dataLayer.push(arguments)},window.gtag("js",new Date),window.gtag("config",i.property,{send_page_view:!1,user_id:i.userID});var e="https://www.googletagmanager.com/gtag/js?id="+i.property;return new Promise((function(r,i){t.injectjs(e,{id:"lighthouse-service-google-analytics",location:"headEnd"}).then((function(){return n.status="READY",u(),r()})).catch((function(e){return n.status="FAILED",i(e)}))}))}function a(e,t){return n.queue.push({activity:e,session:t})}function u(){n.queue.length>0&&(c(n.queue[0].activity,n.queue[0].session),n.queue.shift(),n.queue.length>0&&u())}function c(e,t){if("NOT_INITIATED"==n.status||"INITIATING"==n.status)return a(e,t);if("READY"==n.status){var o=r.objectkit.getProp(i.localEventNames,e.name,e.name),u={};if("SCREEN"==e.name){var c={title:r.objectkit.getProp(e.params,"title",document.title),page_location:r.objectkit.getProp(e.params,"url",location.href),page_path:r.objectkit.getProp(e.params,"path",location.pathname)};window.gtag("config",i.property,c),u.screen_name=r.objectkit.getProp(e.params,"title",document.title),t.app.name&&(u.app_name=t.app.name),t.app.version&&(u.app_version=t.app.version)}else"EXCEPTION"==e.name?u.description=e.params.error.message:"SHARE"==e.name?(u.event_category=e.params.channel,u.event_label=r.objectkit.getProp(e.params,"url",location.href)):"SEARCH"==e.name?(u.event_category="engagement",u.event_label=e.params.query):"SIGNIN"==e.name||"SIGNUP"==e.name?(u.event_category="engagement",u.event_label=e.params.method):(u.event_category="engagement",u.event_label=e.params.value||"");return window.gtag("event",o,u)}}function s(){window["ga-disable-"+i.property]=!0}function l(){window["ga-disable-"+i.property]=!1}return{name:i.name,init:o,send:c,disable:s,enable:l}},e.LighthouseAnalytics=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};function n(){var e={},t=0,n=0;return{enqueue:function(t){e[n]=t,n++},dequeue:function(){var n=e[t];return delete e[t],t++,n},peek:function(){return e[t]},length:function(){return n-t}}}var i={trackVisibility:!0,collectReferrer:!0},a=Object.assign({},i,e),u=t.create();a.window||"undefined"==typeof window||window;var c=a.document||("undefined"==typeof document?void 0:document),s={storageKeys:{did:"LA_DID"}},l=[],f=n(),p={did:null,new:!1,user:{id:null},app:{name:null,version:null,id:null}};function d(){var e=J.get(s.storageKeys.did);r.validationkit.isEmpty(e)&&(p.new=!0,e=ae(),J.set(s.storageKeys.did,e)),p.did=e,a.collectReferrer&&(p.referrer=c.referrer)}function g(e){e.hasOwnProperty("id")&&(p.user.id=e.id)}function m(e){Object.keys(p.app).map((function(t){e.hasOwnProperty(t)&&(p.app[t]=e[t])}))}function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Date.now(),i={name:e,timestamp:n,params:t};0===f.length()&&(i.firstVisitMaybe=p.new,a.collectReferrer&&(i.referrer=r.validationkit.isNotEmpty(p.referrer)?p.referrer:null)),f.enqueue(i),l.length>0&&l.map((function(e){return e.send(f.dequeue(),p)})),u.emit("activity",[i,p])}function v(e){return l.push(e)&&e.init()}return d(),a.trackVisibility&&(p.currentVisibility="visible",o.default.on("update",(function(e){p.currentVisibility=e,u.emit("visibility",[e]),y("VISIBILITY",{value:e})})),o.default.start()),{on:u.on,newActivity:y,setUser:g,setApp:m,newService:v}},Object.defineProperty(e,"__esModule",{value:!0}),e}({},EventEmitterObject,VisibilityStateListener,Basekits);
