"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("event-emitter-object"),e=require("visibility-state-listener"),n=require("basekits");function r(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var o=r(e),i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},a=function(t){return t&&t.Math==Math&&t},c=a("object"==typeof globalThis&&globalThis)||a("object"==typeof window&&window)||a("object"==typeof self&&self)||a("object"==typeof i&&i)||function(){return this}()||Function("return this")(),u={},s=function(t){try{return!!t()}catch(t){return!0}},f=!s((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),l={},p={}.propertyIsEnumerable,d=Object.getOwnPropertyDescriptor,v=d&&!p.call({1:2},1);l.f=v?function(t){var e=d(this,t);return!!e&&e.enumerable}:p;var g=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},h={}.toString,y=function(t){return h.call(t).slice(8,-1)},m=y,b="".split,w=s((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==m(t)?b.call(t,""):Object(t)}:Object,j=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t},S=w,E=j,O=function(t){return S(E(t))},_=function(t){return"object"==typeof t?null!==t:"function"==typeof t},P=_,T=function(t,e){if(!P(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!P(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!P(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!P(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")},I=j,A=function(t){return Object(I(t))},k=A,x={}.hasOwnProperty,N=function(t,e){return x.call(k(t),e)},M=_,R=c.document,D=M(R)&&M(R.createElement),F=function(t){return D?R.createElement(t):{}},L=F,G=!f&&!s((function(){return 7!=Object.defineProperty(L("div"),"a",{get:function(){return 7}}).a})),q=f,C=l,z=g,B=O,U=T,V=N,H=G,J=Object.getOwnPropertyDescriptor;u.f=q?J:function(t,e){if(t=B(t),e=U(e,!0),H)try{return J(t,e)}catch(t){}if(V(t,e))return z(!C.f.call(t,e),t[e])};var K={},$=_,W=function(t){if(!$(t))throw TypeError(String(t)+" is not an object");return t},Y=f,X=G,Z=W,Q=T,tt=Object.defineProperty;K.f=Y?tt:function(t,e,n){if(Z(t),e=Q(e,!0),Z(n),X)try{return tt(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t};var et=K,nt=g,rt=f?function(t,e,n){return et.f(t,e,nt(1,n))}:function(t,e,n){return t[e]=n,t},ot={exports:{}},it=c,at=rt,ct=function(t,e){try{at(it,t,e)}catch(n){it[t]=e}return e},ut=ct,st=c["__core-js_shared__"]||ut("__core-js_shared__",{}),ft=st,lt=Function.toString;"function"!=typeof ft.inspectSource&&(ft.inspectSource=function(t){return lt.call(t)});var pt=ft.inspectSource,dt=pt,vt=c.WeakMap,gt="function"==typeof vt&&/native code/.test(dt(vt)),ht={exports:{}},yt=st;(ht.exports=function(t,e){return yt[t]||(yt[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.13.0",mode:"global",copyright:"Â© 2021 Denis Pushkarev (zloirock.ru)"});var mt,bt,wt,jt=0,St=Math.random(),Et=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++jt+St).toString(36)},Ot=ht.exports,_t=Et,Pt=Ot("keys"),Tt={},It=gt,At=_,kt=rt,xt=N,Nt=st,Mt=function(t){return Pt[t]||(Pt[t]=_t(t))},Rt=Tt,Dt=c.WeakMap;if(It||Nt.state){var Ft=Nt.state||(Nt.state=new Dt),Lt=Ft.get,Gt=Ft.has,qt=Ft.set;mt=function(t,e){if(Gt.call(Ft,t))throw new TypeError("Object already initialized");return e.facade=t,qt.call(Ft,t,e),e},bt=function(t){return Lt.call(Ft,t)||{}},wt=function(t){return Gt.call(Ft,t)}}else{var Ct=Mt("state");Rt[Ct]=!0,mt=function(t,e){if(xt(t,Ct))throw new TypeError("Object already initialized");return e.facade=t,kt(t,Ct,e),e},bt=function(t){return xt(t,Ct)?t[Ct]:{}},wt=function(t){return xt(t,Ct)}}var zt={set:mt,get:bt,has:wt,enforce:function(t){return wt(t)?bt(t):mt(t,{})},getterFor:function(t){return function(e){var n;if(!At(e)||(n=bt(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}},Bt=c,Ut=rt,Vt=N,Ht=ct,Jt=pt,Kt=zt.get,$t=zt.enforce,Wt=String(String).split("String");(ot.exports=function(t,e,n,r){var o,i=!!r&&!!r.unsafe,a=!!r&&!!r.enumerable,c=!!r&&!!r.noTargetGet;"function"==typeof n&&("string"!=typeof e||Vt(n,"name")||Ut(n,"name",e),(o=$t(n)).source||(o.source=Wt.join("string"==typeof e?e:""))),t!==Bt?(i?!c&&t[e]&&(a=!0):delete t[e],a?t[e]=n:Ut(t,e,n)):a?t[e]=n:Ht(e,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&Kt(this).source||Jt(this)}));var Yt=c,Xt=c,Zt=function(t){return"function"==typeof t?t:void 0},Qt=function(t,e){return arguments.length<2?Zt(Yt[t])||Zt(Xt[t]):Yt[t]&&Yt[t][e]||Xt[t]&&Xt[t][e]},te={},ee=Math.ceil,ne=Math.floor,re=function(t){return isNaN(t=+t)?0:(t>0?ne:ee)(t)},oe=re,ie=Math.min,ae=function(t){return t>0?ie(oe(t),9007199254740991):0},ce=re,ue=Math.max,se=Math.min,fe=O,le=ae,pe=function(t,e){var n=ce(t);return n<0?ue(n+e,0):se(n,e)},de=function(t){return function(e,n,r){var o,i=fe(e),a=le(i.length),c=pe(r,a);if(t&&n!=n){for(;a>c;)if((o=i[c++])!=o)return!0}else for(;a>c;c++)if((t||c in i)&&i[c]===n)return t||c||0;return!t&&-1}},ve={includes:de(!0),indexOf:de(!1)},ge=N,he=O,ye=ve.indexOf,me=Tt,be=function(t,e){var n,r=he(t),o=0,i=[];for(n in r)!ge(me,n)&&ge(r,n)&&i.push(n);for(;e.length>o;)ge(r,n=e[o++])&&(~ye(i,n)||i.push(n));return i},we=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],je=be,Se=we.concat("length","prototype");te.f=Object.getOwnPropertyNames||function(t){return je(t,Se)};var Ee={};Ee.f=Object.getOwnPropertySymbols;var Oe=te,_e=Ee,Pe=W,Te=Qt("Reflect","ownKeys")||function(t){var e=Oe.f(Pe(t)),n=_e.f;return n?e.concat(n(t)):e},Ie=N,Ae=Te,ke=u,xe=K,Ne=s,Me=/#|\.prototype\./,Re=function(t,e){var n=Fe[De(t)];return n==Ge||n!=Le&&("function"==typeof e?Ne(e):!!e)},De=Re.normalize=function(t){return String(t).replace(Me,".").toLowerCase()},Fe=Re.data={},Le=Re.NATIVE="N",Ge=Re.POLYFILL="P",qe=Re,Ce=c,ze=u.f,Be=rt,Ue=ot.exports,Ve=ct,He=function(t,e){for(var n=Ae(e),r=xe.f,o=ke.f,i=0;i<n.length;i++){var a=n[i];Ie(t,a)||r(t,a,o(e,a))}},Je=qe,Ke=function(t,e){var n,r,o,i,a,c=t.target,u=t.global,s=t.stat;if(n=u?Ce:s?Ce[c]||Ve(c,{}):(Ce[c]||{}).prototype)for(r in e){if(i=e[r],o=t.noTargetGet?(a=ze(n,r))&&a.value:n[r],!Je(u?r:c+(s?".":"#")+r,t.forced)&&void 0!==o){if(typeof i==typeof o)continue;He(i,o)}(t.sham||o&&o.sham)&&Be(i,"sham",!0),Ue(n,r,i,t)}},$e=be,We=we,Ye=Object.keys||function(t){return $e(t,We)},Xe=f,Ze=s,Qe=Ye,tn=Ee,en=l,nn=A,rn=w,on=Object.assign,an=Object.defineProperty,cn=!on||Ze((function(){if(Xe&&1!==on({b:1},on(an({},"a",{enumerable:!0,get:function(){an(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach((function(t){e[t]=t})),7!=on({},t)[n]||Qe(on({},e)).join("")!=r}))?function(t,e){for(var n=nn(t),r=arguments.length,o=1,i=tn.f,a=en.f;r>o;)for(var c,u=rn(arguments[o++]),s=i?Qe(u).concat(i(u)):Qe(u),f=s.length,l=0;f>l;)c=s[l++],Xe&&!a.call(u,c)||(n[c]=u[c]);return n}:on;Ke({target:"Object",stat:!0,forced:Object.assign!==cn},{assign:cn});var un,sn,fn=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t},ln=fn,pn=function(t,e,n){if(ln(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,o){return t.call(e,n,r,o)}}return function(){return t.apply(e,arguments)}},dn=y,vn=Array.isArray||function(t){return"Array"==dn(t)},gn=Qt("navigator","userAgent")||"",hn=gn,yn=c.process,mn=yn&&yn.versions,bn=mn&&mn.v8;bn?sn=(un=bn.split("."))[0]<4?1:un[0]+un[1]:hn&&(!(un=hn.match(/Edge\/(\d+)/))||un[1]>=74)&&(un=hn.match(/Chrome\/(\d+)/))&&(sn=un[1]);var wn=sn&&+sn,jn=wn,Sn=s,En=!!Object.getOwnPropertySymbols&&!Sn((function(){return!String(Symbol())||!Symbol.sham&&jn&&jn<41})),On=En&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,_n=c,Pn=ht.exports,Tn=N,In=Et,An=En,kn=On,xn=Pn("wks"),Nn=_n.Symbol,Mn=kn?Nn:Nn&&Nn.withoutSetter||In,Rn=function(t){return Tn(xn,t)&&(An||"string"==typeof xn[t])||(An&&Tn(Nn,t)?xn[t]=Nn[t]:xn[t]=Mn("Symbol."+t)),xn[t]},Dn=_,Fn=vn,Ln=Rn("species"),Gn=pn,qn=w,Cn=A,zn=ae,Bn=function(t,e){var n;return Fn(t)&&("function"!=typeof(n=t.constructor)||n!==Array&&!Fn(n.prototype)?Dn(n)&&null===(n=n[Ln])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===e?0:e)},Un=[].push,Vn=function(t){var e=1==t,n=2==t,r=3==t,o=4==t,i=6==t,a=7==t,c=5==t||i;return function(u,s,f,l){for(var p,d,v=Cn(u),g=qn(v),h=Gn(s,f,3),y=zn(g.length),m=0,b=l||Bn,w=e?b(u,y):n||a?b(u,0):void 0;y>m;m++)if((c||m in g)&&(d=h(p=g[m],m,v),t))if(e)w[m]=d;else if(d)switch(t){case 3:return!0;case 5:return p;case 6:return m;case 2:Un.call(w,p)}else switch(t){case 4:return!1;case 7:Un.call(w,p)}return i?-1:r||o?o:w}},Hn={forEach:Vn(0),map:Vn(1),filter:Vn(2),some:Vn(3),every:Vn(4),find:Vn(5),findIndex:Vn(6),filterOut:Vn(7)},Jn=s,Kn=wn,$n=Rn("species"),Wn=Hn.map;Ke({target:"Array",proto:!0,forced:!function(t){return Kn>=51||!Jn((function(){var e=[];return(e.constructor={})[$n]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}("map")},{map:function(t){return Wn(this,t,arguments.length>1?arguments[1]:void 0)}});var Yn=A,Xn=Ye;Ke({target:"Object",stat:!0,forced:s((function(){Xn(1)}))},{keys:function(t){return Xn(Yn(t))}});var Zn=Object.assign?Object.assign:function(t,e,n,r){for(var o=1;o<arguments.length;o++)or(Object(arguments[o]),(function(e,n){t[n]=e}));return t},Qn=function(){if(Object.create)return function(t,e,n,r){var o=rr(arguments,1);return Zn.apply(this,[Object.create(t)].concat(o))};{function t(){}return function(e,n,r,o){var i=rr(arguments,1);return t.prototype=e,Zn.apply(this,[new t].concat(i))}}}(),tr=String.prototype.trim?function(t){return String.prototype.trim.call(t)}:function(t){return t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},er="undefined"!=typeof window?window:i,nr={assign:Zn,create:Qn,trim:tr,bind:function(t,e){return function(){return e.apply(t,Array.prototype.slice.call(arguments,0))}},slice:rr,each:or,map:function(t,e){var n=ar(t)?[]:{};return ir(t,(function(t,r){return n[r]=e(t,r),!1})),n},pluck:ir,isList:ar,isFunction:function(t){return t&&"[object Function]"==={}.toString.call(t)},isObject:function(t){return t&&"[object Object]"==={}.toString.call(t)},Global:er};function rr(t,e){return Array.prototype.slice.call(t,e||0)}function or(t,e){ir(t,(function(t,n){return e(t,n),!1}))}function ir(t,e){if(ar(t)){for(var n=0;n<t.length;n++)if(e(t[n],n))return t[n]}else for(var r in t)if(t.hasOwnProperty(r)&&e(t[r],r))return t[r]}function ar(t){return null!=t&&"function"!=typeof t&&"number"==typeof t.length}var cr=nr.slice,ur=nr.pluck,sr=nr.each,fr=nr.bind,lr=nr.create,pr=nr.isList,dr=nr.isFunction,vr=nr.isObject,gr={createStore:yr},hr={version:"2.0.12",enabled:!1,get:function(t,e){var n=this.storage.read(this._namespacePrefix+t);return this._deserialize(n,e)},set:function(t,e){return void 0===e?this.remove(t):(this.storage.write(this._namespacePrefix+t,this._serialize(e)),e)},remove:function(t){this.storage.remove(this._namespacePrefix+t)},each:function(t){var e=this;this.storage.each((function(n,r){t.call(e,e._deserialize(n),(r||"").replace(e._namespaceRegexp,""))}))},clearAll:function(){this.storage.clearAll()},hasNamespace:function(t){return this._namespacePrefix=="__storejs_"+t+"_"},createStore:function(){return yr.apply(this,arguments)},addPlugin:function(t){this._addPlugin(t)},namespace:function(t){return yr(this.storage,this.plugins,t)}};function yr(t,e,n){n||(n=""),t&&!pr(t)&&(t=[t]),e&&!pr(e)&&(e=[e]);var r=n?"__storejs_"+n+"_":"",o=n?new RegExp("^"+r):null;if(!/^[a-zA-Z0-9_\-]*$/.test(n))throw new Error("store.js namespaces can only have alphanumerics + underscores and dashes");var i=lr({_namespacePrefix:r,_namespaceRegexp:o,_testStorage:function(t){try{var e="__storejs__test__";t.write(e,e);var n=t.read(e)===e;return t.remove(e),n}catch(t){return!1}},_assignPluginFnProp:function(t,e){var n=this[e];this[e]=function(){var e=cr(arguments,0),r=this;function o(){if(n)return sr(arguments,(function(t,n){e[n]=t})),n.apply(r,e)}var i=[o].concat(e);return t.apply(r,i)}},_serialize:function(t){return JSON.stringify(t)},_deserialize:function(t,e){if(!t)return e;var n="";try{n=JSON.parse(t)}catch(e){n=t}return void 0!==n?n:e},_addStorage:function(t){this.enabled||this._testStorage(t)&&(this.storage=t,this.enabled=!0)},_addPlugin:function(t){var e=this;if(pr(t))sr(t,(function(t){e._addPlugin(t)}));else if(!ur(this.plugins,(function(e){return t===e}))){if(this.plugins.push(t),!dr(t))throw new Error("Plugins must be function values that return objects");var n=t.call(this);if(!vr(n))throw new Error("Plugins must return an object of function properties");sr(n,(function(n,r){if(!dr(n))throw new Error("Bad plugin property: "+r+" from plugin "+t.name+". Plugins should only return functions.");e._assignPluginFnProp(n,r)}))}},addStorage:function(t){!function(){var t="undefined"==typeof console?null:console;if(t){(t.warn?t.warn:t.log).apply(t,arguments)}}("store.addStorage(storage) is deprecated. Use createStore([storages])"),this._addStorage(t)}},hr,{plugins:[]});return i.raw={},sr(i,(function(t,e){dr(t)&&(i.raw[e]=fr(i,t))})),sr(t,(function(t){i._addStorage(t)})),sr(e,(function(t){i._addPlugin(t)})),i}var mr=nr.Global,br={name:"localStorage",read:jr,write:function(t,e){return wr().setItem(t,e)},each:function(t){for(var e=wr().length-1;e>=0;e--){var n=wr().key(e);t(jr(n),n)}},remove:function(t){return wr().removeItem(t)},clearAll:function(){return wr().clear()}};function wr(){return mr.localStorage}function jr(t){return wr().getItem(t)}var Sr=nr.Global,Er={name:"sessionStorage",read:_r,write:function(t,e){return Or().setItem(t,e)},each:function(t){for(var e=Or().length-1;e>=0;e--){var n=Or().key(e);t(_r(n),n)}},remove:function(t){return Or().removeItem(t)},clearAll:function(){return Or().clear()}};function Or(){return Sr.sessionStorage}function _r(t){return Or().getItem(t)}var Pr=nr.trim,Tr={name:"cookieStorage",read:function(t){if(!t||!xr(t))return null;var e="(?:^|.*;\\s*)"+escape(t).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*((?:[^;](?!;))*[^;]?).*";return unescape(Ir.cookie.replace(new RegExp(e),"$1"))},write:function(t,e){if(!t)return;Ir.cookie=escape(t)+"="+escape(e)+"; expires=Tue, 19 Jan 2038 03:14:07 GMT; path=/"},each:Ar,remove:kr,clearAll:function(){Ar((function(t,e){kr(e)}))}},Ir=nr.Global.document;function Ar(t){for(var e=Ir.cookie.split(/; ?/g),n=e.length-1;n>=0;n--)if(Pr(e[n])){var r=e[n].split("="),o=unescape(r[0]);t(unescape(r[1]),o)}}function kr(t){t&&xr(t)&&(Ir.cookie=escape(t)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/")}function xr(t){return new RegExp("(?:^|;\\s*)"+escape(t).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(Ir.cookie)}var Nr={name:"memoryStorage",read:function(t){return Mr[t]},write:function(t,e){Mr[t]=e},each:function(t){for(var e in Mr)Mr.hasOwnProperty(e)&&t(Mr[e],e)},remove:function(t){delete Mr[t]},clearAll:function(t){Mr={}}},Mr={};var Rr,Dr=gr.createStore([br,Er,Tr,Nr],[]),Fr=function(t,e){var n="000000000"+t;return n.substr(n.length-e)},Lr=Fr,Gr="object"==typeof window?window:self,qr=Object.keys(Gr).length,Cr=Lr(((navigator.mimeTypes?navigator.mimeTypes.length:0)+navigator.userAgent.length).toString(36)+qr.toString(36),4),zr="undefined"!=typeof window&&(window.crypto||window.msCrypto)||"undefined"!=typeof self&&self.crypto;if(zr){var Br=Math.pow(2,32)-1;Rr=function(){return Math.abs(zr.getRandomValues(new Uint32Array(1))[0]/Br)}}else Rr=Math.random;var Ur=function(){return Cr},Vr=Fr,Hr=Rr,Jr=0,Kr=Math.pow(36,4);function $r(){return Vr((Hr()*Kr<<0).toString(36),4)}function Wr(){return Jr=Jr<Kr?Jr:0,++Jr-1}function Yr(){return"c"+(new Date).getTime().toString(36)+Vr(Wr().toString(36),4)+Ur()+($r()+$r())}Yr.slug=function(){var t=(new Date).getTime().toString(36),e=Wr().toString(36).slice(-4),n=Ur().slice(0,1)+Ur().slice(-1),r=$r().slice(-2);return t.slice(-2)+e+n+r},Yr.isCuid=function(t){return"string"==typeof t&&!!t.startsWith("c")},Yr.isSlug=function(t){if("string"!=typeof t)return!1;var e=t.length;return e>=7&&e<=10},Yr.fingerprint=Ur;var Xr=Yr;var Zr={};Zr[Rn("toStringTag")]="z";var Qr="[object z]"===String(Zr),to=Qr,eo=y,no=Rn("toStringTag"),ro="Arguments"==eo(function(){return arguments}()),oo=to?eo:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),no))?n:ro?eo(e):"Object"==(r=eo(e))&&"function"==typeof e.callee?"Arguments":r},io=oo,ao=Qr?{}.toString:function(){return"[object "+io(this)+"]"},co=Qr,uo=ot.exports,so=ao;co||uo(Object.prototype,"toString",so,{unsafe:!0});var fo=c.Promise,lo=ot.exports,po=_,vo=W,go=function(t){if(!po(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype");return t},ho=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),e=n instanceof Array}catch(t){}return function(n,r){return vo(n),go(r),e?t.call(n,r):n.__proto__=r,n}}():void 0),yo=K.f,mo=N,bo=Rn("toStringTag"),wo=Qt,jo=K,So=f,Eo=Rn("species"),Oo={},_o=Oo,Po=Rn("iterator"),To=Array.prototype,Io=oo,Ao=Oo,ko=Rn("iterator"),xo=W,No=W,Mo=function(t){return void 0!==t&&(_o.Array===t||To[Po]===t)},Ro=ae,Do=pn,Fo=function(t){if(null!=t)return t[ko]||t["@@iterator"]||Ao[Io(t)]},Lo=function(t){var e=t.return;if(void 0!==e)return xo(e.call(t)).value},Go=function(t,e){this.stopped=t,this.result=e},qo=Rn("iterator"),Co=!1;try{var zo=0,Bo={next:function(){return{done:!!zo++}},return:function(){Co=!0}};Bo[qo]=function(){return this},Array.from(Bo,(function(){throw 2}))}catch(t){}var Uo,Vo,Ho,Jo=W,Ko=fn,$o=Rn("species"),Wo=Qt("document","documentElement"),Yo=/(?:iphone|ipod|ipad).*applewebkit/i.test(gn),Xo="process"==y(c.process),Zo=c,Qo=s,ti=pn,ei=Wo,ni=F,ri=Yo,oi=Xo,ii=Zo.location,ai=Zo.setImmediate,ci=Zo.clearImmediate,ui=Zo.process,si=Zo.MessageChannel,fi=Zo.Dispatch,li=0,pi={},di=function(t){if(pi.hasOwnProperty(t)){var e=pi[t];delete pi[t],e()}},vi=function(t){return function(){di(t)}},gi=function(t){di(t.data)},hi=function(t){Zo.postMessage(t+"",ii.protocol+"//"+ii.host)};ai&&ci||(ai=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return pi[++li]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},Uo(li),li},ci=function(t){delete pi[t]},oi?Uo=function(t){ui.nextTick(vi(t))}:fi&&fi.now?Uo=function(t){fi.now(vi(t))}:si&&!ri?(Ho=(Vo=new si).port2,Vo.port1.onmessage=gi,Uo=ti(Ho.postMessage,Ho,1)):Zo.addEventListener&&"function"==typeof postMessage&&!Zo.importScripts&&ii&&"file:"!==ii.protocol&&!Qo(hi)?(Uo=hi,Zo.addEventListener("message",gi,!1)):Uo="onreadystatechange"in ni("script")?function(t){ei.appendChild(ni("script")).onreadystatechange=function(){ei.removeChild(this),di(t)}}:function(t){setTimeout(vi(t),0)});var yi,mi,bi,wi,ji,Si,Ei,Oi,_i={set:ai,clear:ci},Pi=/web0s(?!.*chrome)/i.test(gn),Ti=c,Ii=u.f,Ai=_i.set,ki=Yo,xi=Pi,Ni=Xo,Mi=Ti.MutationObserver||Ti.WebKitMutationObserver,Ri=Ti.document,Di=Ti.process,Fi=Ti.Promise,Li=Ii(Ti,"queueMicrotask"),Gi=Li&&Li.value;Gi||(yi=function(){var t,e;for(Ni&&(t=Di.domain)&&t.exit();mi;){e=mi.fn,mi=mi.next;try{e()}catch(t){throw mi?wi():bi=void 0,t}}bi=void 0,t&&t.enter()},ki||Ni||xi||!Mi||!Ri?Fi&&Fi.resolve?((Ei=Fi.resolve(void 0)).constructor=Fi,Oi=Ei.then,wi=function(){Oi.call(Ei,yi)}):wi=Ni?function(){Di.nextTick(yi)}:function(){Ai.call(Ti,yi)}:(ji=!0,Si=Ri.createTextNode(""),new Mi(yi).observe(Si,{characterData:!0}),wi=function(){Si.data=ji=!ji}));var qi=Gi||function(t){var e={fn:t,next:void 0};bi&&(bi.next=e),mi||(mi=e,wi()),bi=e},Ci={},zi=fn,Bi=function(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r})),this.resolve=zi(e),this.reject=zi(n)};Ci.f=function(t){return new Bi(t)};var Ui,Vi,Hi,Ji,Ki=W,$i=_,Wi=Ci,Yi=c,Xi="object"==typeof window,Zi=Ke,Qi=c,ta=Qt,ea=fo,na=ot.exports,ra=function(t,e,n){for(var r in e)lo(t,r,e[r],n);return t},oa=ho,ia=function(t,e,n){t&&!mo(t=n?t:t.prototype,bo)&&yo(t,bo,{configurable:!0,value:e})},aa=function(t){var e=wo(t),n=jo.f;So&&e&&!e[Eo]&&n(e,Eo,{configurable:!0,get:function(){return this}})},ca=_,ua=fn,sa=function(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t},fa=pt,la=function(t,e,n){var r,o,i,a,c,u,s,f=n&&n.that,l=!(!n||!n.AS_ENTRIES),p=!(!n||!n.IS_ITERATOR),d=!(!n||!n.INTERRUPTED),v=Do(e,f,1+l+d),g=function(t){return r&&Lo(r),new Go(!0,t)},h=function(t){return l?(No(t),d?v(t[0],t[1],g):v(t[0],t[1])):d?v(t,g):v(t)};if(p)r=t;else{if("function"!=typeof(o=Fo(t)))throw TypeError("Target is not iterable");if(Mo(o)){for(i=0,a=Ro(t.length);a>i;i++)if((c=h(t[i]))&&c instanceof Go)return c;return new Go(!1)}r=o.call(t)}for(u=r.next;!(s=u.call(r)).done;){try{c=h(s.value)}catch(t){throw Lo(r),t}if("object"==typeof c&&c&&c instanceof Go)return c}return new Go(!1)},pa=function(t,e){if(!e&&!Co)return!1;var n=!1;try{var r={};r[qo]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(t){}return n},da=function(t,e){var n,r=Jo(t).constructor;return void 0===r||null==(n=Jo(r)[$o])?e:Ko(n)},va=_i.set,ga=qi,ha=function(t,e){if(Ki(t),$i(e)&&e.constructor===t)return e;var n=Wi.f(t);return(0,n.resolve)(e),n.promise},ya=function(t,e){var n=Yi.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e))},ma=Ci,ba=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}},wa=zt,ja=qe,Sa=Xi,Ea=Xo,Oa=wn,_a=Rn("species"),Pa="Promise",Ta=wa.get,Ia=wa.set,Aa=wa.getterFor(Pa),ka=ea&&ea.prototype,xa=ea,Na=ka,Ma=Qi.TypeError,Ra=Qi.document,Da=Qi.process,Fa=ma.f,La=Fa,Ga=!!(Ra&&Ra.createEvent&&Qi.dispatchEvent),qa="function"==typeof PromiseRejectionEvent,Ca=!1,za=ja(Pa,(function(){var t=fa(xa)!==String(xa);if(!t&&66===Oa)return!0;if(Oa>=51&&/native code/.test(xa))return!1;var e=new xa((function(t){t(1)})),n=function(t){t((function(){}),(function(){}))};return(e.constructor={})[_a]=n,!(Ca=e.then((function(){}))instanceof n)||!t&&Sa&&!qa})),Ba=za||!pa((function(t){xa.all(t).catch((function(){}))})),Ua=function(t){var e;return!(!ca(t)||"function"!=typeof(e=t.then))&&e},Va=function(t,e){if(!t.notified){t.notified=!0;var n=t.reactions;ga((function(){for(var r=t.value,o=1==t.state,i=0;n.length>i;){var a,c,u,s=n[i++],f=o?s.ok:s.fail,l=s.resolve,p=s.reject,d=s.domain;try{f?(o||(2===t.rejection&&$a(t),t.rejection=1),!0===f?a=r:(d&&d.enter(),a=f(r),d&&(d.exit(),u=!0)),a===s.promise?p(Ma("Promise-chain cycle")):(c=Ua(a))?c.call(a,l,p):l(a)):p(r)}catch(t){d&&!u&&d.exit(),p(t)}}t.reactions=[],t.notified=!1,e&&!t.rejection&&Ja(t)}))}},Ha=function(t,e,n){var r,o;Ga?((r=Ra.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),Qi.dispatchEvent(r)):r={promise:e,reason:n},!qa&&(o=Qi["on"+t])?o(r):"unhandledrejection"===t&&ya("Unhandled promise rejection",n)},Ja=function(t){va.call(Qi,(function(){var e,n=t.facade,r=t.value;if(Ka(t)&&(e=ba((function(){Ea?Da.emit("unhandledRejection",r,n):Ha("unhandledrejection",n,r)})),t.rejection=Ea||Ka(t)?2:1,e.error))throw e.value}))},Ka=function(t){return 1!==t.rejection&&!t.parent},$a=function(t){va.call(Qi,(function(){var e=t.facade;Ea?Da.emit("rejectionHandled",e):Ha("rejectionhandled",e,t.value)}))},Wa=function(t,e,n){return function(r){t(e,r,n)}},Ya=function(t,e,n){t.done||(t.done=!0,n&&(t=n),t.value=e,t.state=2,Va(t,!0))},Xa=function(t,e,n){if(!t.done){t.done=!0,n&&(t=n);try{if(t.facade===e)throw Ma("Promise can't be resolved itself");var r=Ua(e);r?ga((function(){var n={done:!1};try{r.call(e,Wa(Xa,n,t),Wa(Ya,n,t))}catch(e){Ya(n,e,t)}})):(t.value=e,t.state=1,Va(t,!1))}catch(e){Ya({done:!1},e,t)}}};if(za&&(Na=(xa=function(t){sa(this,xa,Pa),ua(t),Ui.call(this);var e=Ta(this);try{t(Wa(Xa,e),Wa(Ya,e))}catch(t){Ya(e,t)}}).prototype,(Ui=function(t){Ia(this,{type:Pa,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=ra(Na,{then:function(t,e){var n=Aa(this),r=Fa(da(this,xa));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=Ea?Da.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&Va(n,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),Vi=function(){var t=new Ui,e=Ta(t);this.promise=t,this.resolve=Wa(Xa,e),this.reject=Wa(Ya,e)},ma.f=Fa=function(t){return t===xa||t===Hi?new Vi(t):La(t)},"function"==typeof ea&&ka!==Object.prototype)){Ji=ka.then,Ca||(na(ka,"then",(function(t,e){var n=this;return new xa((function(t,e){Ji.call(n,t,e)})).then(t,e)}),{unsafe:!0}),na(ka,"catch",Na.catch,{unsafe:!0}));try{delete ka.constructor}catch(t){}oa&&oa(ka,Na)}Zi({global:!0,wrap:!0,forced:za},{Promise:xa}),ia(xa,Pa,!1),aa(Pa),Hi=ta(Pa),Zi({target:Pa,stat:!0,forced:za},{reject:function(t){var e=Fa(this);return e.reject.call(void 0,t),e.promise}}),Zi({target:Pa,stat:!0,forced:za},{resolve:function(t){return ha(this,t)}}),Zi({target:Pa,stat:!0,forced:Ba},{all:function(t){var e=this,n=Fa(e),r=n.resolve,o=n.reject,i=ba((function(){var n=ua(e.resolve),i=[],a=0,c=1;la(t,(function(t){var u=a++,s=!1;i.push(void 0),c++,n.call(e,t).then((function(t){s||(s=!0,i[u]=t,--c||r(i))}),o)})),--c||r(i)}));return i.error&&o(i.value),n.promise},race:function(t){var e=this,n=Fa(e),r=n.reject,o=ba((function(){var o=ua(e.resolve);la(t,(function(t){o.call(e,t).then(n.resolve,r)}))}));return o.error&&r(o.value),n.promise}});var Za=f,Qa=K.f,tc=Function.prototype,ec=tc.toString,nc=/^\s*function ([^ (]*)/;Za&&!("name"in tc)&&Qa(tc,"name",{configurable:!0,get:function(){try{return ec.call(this).match(nc)[1]}catch(t){return""}}});var rc=function(){var t=0,e=["bodyEnd","bodyStart","headEnd"];function n(t){return t.split("/").reverse()[0].split("?")[0]}function r(e){return e.replace(/[^a-zA-Z0-9]/g,"-").split("-").reverse().join("-")+"-"+t}return{create:function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i={timeout:3e3};function a(o){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,c={id:null,type:"text/javascript",async:!0,attrs:{},location:e[0],global:null};return"[object Object]"===Object.prototype.toString.call(a)&&Object.keys(c).map((function(t){a.hasOwnProperty(t)&&(c[t]=a[t])})),c.id||(c.id=r(n(o)),t+=1),new Promise((function(t,e){if(document.getElementById(c.id))return t(c.id);var n=setTimeout((function(){return e(new Error("Inject timeout."))}),i.timeout),r=document.createElement("script");function a(){if(clearTimeout(n),!c.global)return t(c.id);var r=0,o=setInterval((function(){return r+=1,window[c.global]?(clearInterval(o),t(c.id)):r>=20?e(new Error("Max call size exceeded. Given up looking for global property.")):void 0}),100)}r.id=c.id,r.type=c.type,r.async=c.async,c.attrs&&Object.keys(c.attrs).map((function(t){r.setAttribute(t,c.attrs[t])})),r.addEventListener?r.addEventListener("load",a,!1):r.readyState?r.onreadystatechange=a:r.onload&&(r.onload=a),r.onerror&&(r.onerror=function(t){return clearTimeout(n),e(t)}),r.src=o,f(r,c.location)}))}function c(o){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,c={id:null,type:"text/css",media:"all",attrs:{},location:e[0]};return"[object Object]"===Object.prototype.toString.call(a)&&Object.keys(c).map((function(t){a.hasOwnProperty(t)&&(c[t]=a[t])})),c.id||(c.id=r(n(o)),t+=1),new Promise((function(t,e){if(document.getElementById(c.id))return t(c.id);var n=setTimeout((function(){return e(new Error("Inject timeout."))}),i.timeout),r=document.createElement("link");function a(){return r.media=c.media,clearTimeout(n),t(c.id)}r.id=c.id,r.rel="stylesheet",r.href=o,r.media="only x",c.attrs&&Object.keys(c.attrs).map((function(t){r.setAttribute(t,c.attrs[t])})),r.addEventListener?r.addEventListener("load",a,!1):r.readyState?r.onreadystatechange=a:r.onload&&(r.onload=a),r.onerror&&(r.onerror=function(t){return clearTimeout(n),e(t)}),f(r,c.location)}))}function u(n,r){var o={id:null,type:"application/ld+json",attrs:{},location:e[0]};if("[object Object]"===Object.prototype.toString.call(r)&&Object.keys(o).map((function(t){r.hasOwnProperty(t)&&(o[t]=r[t])})),o.id||(o.id=t,t+=1),document.getElementById(o.id))return o.id;var i=document.createElement("script");return i.id=o.id,i.type=o.type,i.text="string"==typeof n?n:JSON.stringify(n),o.attrs&&Object.keys(o.attrs).map((function(t){i.setAttribute(t,o.attrs[t])})),f(i,o.location),o.id}function s(t){var e=document.getElementById(t);e&&e.parentNode.removeChild(e)}function f(t,e){var n=document.getElementsByTagName("head")[0],r=document.getElementsByTagName("body")[0];"headEnd"==e?n.insertBefore(t,null):"bodyEnd"==e?r.insertBefore(t,null):"bodyStart"==e&&r.insertBefore(t,r.firstChild)}return"[object Object]"===Object.prototype.toString.call(o)&&Object.keys(i).map((function(t){o.hasOwnProperty(t)&&(i[t]=o[t])})),{injectjs:a,injectcss:c,injectjsonld:u,remove:s}}}}();exports.GoogleAnalytics=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(n.typekit.isEmpty(t.property))throw new Error("Specify Google Analytics property.");var e=rc.create(),r={status:"NOT_INITIATED",queue:[]},o={name:"Google Analytics",property:t.property,userID:n.objectkit.getProp(t,"userID",null),localEventNames:{SCREEN:"screen_view",TIMING:"timing_complete",EXCEPTION:"exception",SHARE:"share",SEARCH:"search",SIGNIN:"login",SIGNUP:"sign_up"}};function i(){r.status="INITIATING",window.dataLayer=window.dataLayer||[],window.gtag=function(){dataLayer.push(arguments)},window.gtag("js",new Date),window.gtag("config",o.property,{send_page_view:!1,user_id:o.userID});var t="https://www.googletagmanager.com/gtag/js?id="+o.property;return new Promise((function(n,o){e.injectjs(t,{id:"lighthouse-service-google-analytics",location:"headEnd"}).then((function(){return r.status="READY",c(),n()})).catch((function(t){return r.status="FAILED",o(t)}))}))}function a(t,e){return r.queue.push({activity:t,session:e})}function c(){r.queue.length>0&&(u(r.queue[0].activity,r.queue[0].session),r.queue.shift(),r.queue.length>0&&c())}function u(t,e){if("NOT_INITIATED"==r.status||"INITIATING"==r.status)return a(t,e);if("READY"==r.status){var i=n.objectkit.getProp(o.localEventNames,t.name,t.name),c={};if("SCREEN"==t.name){var u={title:n.objectkit.getProp(t.params,"title",document.title),page_location:n.objectkit.getProp(t.params,"url",location.href),page_path:n.objectkit.getProp(t.params,"path",location.pathname)};window.gtag("config",o.property,u),c.screen_name=n.objectkit.getProp(t.params,"title",document.title),e.app.name&&(c.app_name=e.app.name),e.app.version&&(c.app_version=e.app.version)}else"EXCEPTION"==t.name?c.description=t.params.error.message:"SHARE"==t.name?(c.event_category=t.params.channel,c.event_label=n.objectkit.getProp(t.params,"url",location.href)):"SEARCH"==t.name?(c.event_category="engagement",c.event_label=t.params.query):"SIGNIN"==t.name||"SIGNUP"==t.name?(c.event_category="engagement",c.event_label=t.params.method):(c.event_category="engagement",c.event_label=t.params.value||"");return window.gtag("event",i,c)}}function s(){window["ga-disable-"+o.property]=!0}function f(){window["ga-disable-"+o.property]=!1}return{name:o.name,init:i,send:u,disable:s,enable:f}},exports.LighthouseAnalytics=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};function r(){var t={},e=0,n=0;return{enqueue:function(e){t[n]=e,n++},dequeue:function(){var n=t[e];return delete t[e],e++,n},peek:function(){return t[e]},length:function(){return n-e}}}var i={trackVisibility:!0,collectReferrer:!0},a=Object.assign({},i,e),c=t.create();a.window||"undefined"==typeof window||window;var u=a.document||("undefined"==typeof document?void 0:document),s={storageKeys:{did:"LA_DID"}},f=[],l=r(),p={did:null,new:!1,user:{id:null},app:{name:null,version:null,id:null}};function d(){var t=Dr.get(s.storageKeys.did);n.validationkit.isEmpty(t)&&(p.new=!0,t=Xr(),Dr.set(s.storageKeys.did,t)),p.did=t,a.collectReferrer&&(p.referrer=u.referrer)}function v(t){t.hasOwnProperty("id")&&(p.user.id=t.id)}function g(t){Object.keys(p.app).map((function(e){t.hasOwnProperty(e)&&(p.app[e]=t[e])}))}function h(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Date.now(),o={name:t,timestamp:r,params:e};0===l.length()&&(o.firstVisitMaybe=p.new,a.collectReferrer&&(o.referrer=n.validationkit.isNotEmpty(p.referrer)?p.referrer:null)),l.enqueue(o),f.length>0&&f.map((function(t){return t.send(l.dequeue(),p)})),c.emit("activity",[o,p])}function y(t){return f.push(t)&&t.init()}return d(),a.trackVisibility&&(p.currentVisibility="visible",o.default.on("update",(function(t){p.currentVisibility=t,c.emit("visibility",[t]),h("VISIBILITY",{value:t})})),o.default.start()),{on:c.on,newActivity:h,setUser:v,setApp:g,newService:y}};
